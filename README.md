# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Общая архитектура

Приложение строится на основе паттерна MVP (Model–View–Presenter) в сочетании с событийно-ориентированным подходом.

## Основные слои приложения:

### Модель (Model)

Служит для хранения и управления данными (товары, корзина, заказ, доставка и т.п.).

### Представление (View)

Отвечает за отображение данных и взаимодействие с пользователем.

### Презентер (Presenter)

Обрабатывает действия пользователя, управляет логикой, вызывает методы модели и обновляет представление. В проекте презентер будет реализован в index.ts и будет взаимодействовать с представлением и моделями через события.

### Событийный посредник (EventEmitter)

Обеспечивает работу событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.

### Классы модели данных

#### 1. Класс Item

Класс описывает информацию о товаре: Название товара, Описание товара, Цена товара, Категория товара, Изображение товара.

Интерфейс модели:

```
export interface IItem {
    id: string;
    description: string;
    image: string;
    title: string;
    category: string;
    price: number
}
```

#### 2. Класс Delivery

Класс отвечает за оформление заказа, собирая и отправляя на сервер следующие данные: Способ оплаты, Адрес доставки, Почта, Телефон.
Метод Validate служит, для проверки заполнения полей формы. Метод submit, служит для отправки данных на сервер.
Событие 'delivery:success' сигнализирует, что процесс оформления заказа прошел успешно. Событие 'error:validation', сообщает что данные
введенные пользователем в форму некорректны.

Интерфейс модели:

```
export interface IDelivery {
    payment: string;
    email: string;
    phone: string;
    address: string;
    total: number;
    items: IItem[];
}
```

#### 3. Класс Basket

Класс отвечает за управление корзиной товаров. Класс содержит список товаров.
Ключевые методы addItem(item), removeItem(id), clear() - для добавления, удаления и очистки товаров в корзине. Метод getItems() позволяет получить список товаров. Метод getTotal() считает итоговую сумму.
Слушает события 'basket:add', 'basket:remove', 'basket:clear' - добавление, удаление и очистка товаров в корзине.
Событие 'basket:updated' сигнализирует об изменении состава корзины.

### Компоненты представления

#### 1. Класс ProductCatalogView

Компонент отображения списка товаров, отвечает за отрисовку карточек товара и обработку клика на товар. Генерирует событие 'product:select', которое уведомляет о выборе товара пользователем.

#### 2. Класс ProductView

Компонент отображает полную информацию о товаре. Генерирует события 'basket:add', 'basket:remove' добавить или удалить товар с корзины.

Интерфейс представления:

```
export interface IProductView {
  item: IItem;
  onClick: (item: IItem) => void;
}

```

#### 3. Класс BasketView

Компонент отображает содержимое корзины товаров в виде списка товаров с итоговой суммой товаров. Так же генерирует событие 'basket:remove' - удаление товара.
И вызывает форму для оформления заказа 'form:open'. Слушает событие 'basket:updated'

Интерфейс представления:

```
export interface IBasketView {
  items: IItem[];
  total: number;
  removeItem: (id: string) => void;
  onClick: () => void;
}
```

#### 4. Класс Form

Компонент формы оформления заказа.
Первым шагом выбирается способ оплаты и адрес доставки. Генерирует событие 'form:step-one' или 'error:validation'.
Вторым шагом заполняется email и телефон. Генерирует событие 'delivery:success' или 'error:validation'.
Слушает событие 'form:open'.

Интерфейс представления:

```
export interface IFormStepOneView {
  payment: string;
  address: string;
}

export interface IFormStepTwoView {
  email: string;
  phone: string;
}
```

#### 5. Класс Popup

Компонент для отображения модальных окон. Включает в себя методы открытия окна, закрытия, размещение контента.
Слушает события: 'popup:open', 'popup:close', 'delivery:success', 'error:validation'

Интерфейс представления:

```
export interface IPopup {
  content: HTMLElement;
  open(): void;
  close(): void;
}
```

#### 6. Класс OrderSuccessView

Компонент представляет содержимое окна успешного оформления заказа. Включает себя заголовок информацию о списанных синапсах и кнопку "За новыми покупками!".
Генерирует событие закрытие по кнопке.

https://github.com/concrete-b60/web-larek-frontend
